{% extends "base.html" %}

{% block title %}Edit Listing - AgriBalance{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Edit Listing</h1>
    <a href="{{ url_for('selling.view_listing', listing_id=listing.id) }}" class="btn btn-outline">
        <i class="fas fa-arrow-left"></i> Back
    </a>
</div>

<div class="card">
    <form method="POST" action="{{ url_for('selling.edit_listing', listing_id=listing.id) }}">
        <div class="grid-2">
            <div class="form-group">
                <label class="form-label" for="crop_name">Crop Name *</label>
                <input type="text" id="crop_name" name="crop_name" class="form-control" 
                       value="{{ listing.crop_name }}" required>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="variety">Variety/Type</label>
                <input type="text" id="variety" name="variety" class="form-control" 
                       value="{{ listing.variety or '' }}">
            </div>
            
            <div class="form-group">
                <label class="form-label" for="quantity">Quantity Available *</label>
                <input type="number" id="quantity" name="quantity" class="form-control" 
                       value="{{ listing.quantity }}" step="0.1" required>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="quantity_unit">Unit</label>
                <select id="quantity_unit" name="quantity_unit" class="form-control">
                    <option value="kg" {{ 'selected' if listing.quantity_unit == 'kg' else '' }}>Kilograms (kg)</option>
                    <option value="quintal" {{ 'selected' if listing.quantity_unit == 'quintal' else '' }}>Quintal</option>
                    <option value="ton" {{ 'selected' if listing.quantity_unit == 'ton' else '' }}>Ton</option>
                    <option value="pieces" {{ 'selected' if listing.quantity_unit == 'pieces' else '' }}>Pieces</option>
                    <option value="dozen" {{ 'selected' if listing.quantity_unit == 'dozen' else '' }}>Dozen</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="price_per_unit">Price per Unit (â‚¹) *</label>
                <input type="number" id="price_per_unit" name="price_per_unit" class="form-control" 
                       value="{{ listing.price_per_unit }}" step="0.01" required>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="location">Location</label>
                <input type="text" id="location" name="location" class="form-control" 
                       value="{{ listing.location or '' }}">
            </div>
            
            <div class="form-group">
                <label class="form-label">
                    <input type="checkbox" name="is_organic" style="width: auto; margin-right: 10px;" {{ 'checked' if listing.is_organic else '' }}>
                    This is organic produce
                </label>
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label" for="description">Description</label>
            <textarea id="description" name="description" class="form-control">{{ listing.description or '' }}</textarea>
        </div>
        
        <div class="flex-between mt-20">
            <a href="{{ url_for('selling.view_listing', listing_id=listing.id) }}" class="btn btn-outline">Cancel</a>
            <button type="submit" class="btn btn-primary btn-large">
                <i class="fas fa-save"></i> Save Changes
            </button>
        </div>
    </form>
</div>
{% endblock %}
